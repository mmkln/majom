"use strict";(self.webpackChunkplatform_frontend=self.webpackChunkplatform_frontend||[]).push([[32],{5032:(R,m,n)=>{n.r(m),n.d(m,{HabitsModule:()=>O});var o=n(1368),p=n(2531),t=n(4496),l=n(1308),u=n(5084),v=n(4704),h=n(8212),f=n(7692),C=n(4058),x=n(2604),S=n(5312),b=n(4940);function k(a,r){1&a&&t.wR5(0,"span",7)}const D=(a,r)=>({"bg-blue-500 text-white":a,"bg-gray-300 dark:bg-gray-600":r});function T(a,r){if(1&a&&(t.I0R(0,"li",3)(1,"span",4),t.OEk(2),t.C$Y(),t.I0R(3,"span",5),t.OEk(4),t.yuY(5,k,1,0,"span",6),t.C$Y()()),2&a){const e=r.$implicit,i=t.GaO();t.yG2(2),t.cNF(e.day),t.yG2(),t.E7m("ngClass",t.IBC(4,D,e.completed,!e.completed)),t.yG2(),t.oRS(" ",e.date.getDate()," "),t.yG2(),t.E7m("ngIf",i.isToday(e.date))}}let I=(()=>{class a{set item(e){this._item=e,this.generateStaticWeek()}get item(){return this._item}constructor(){this.daysOfWeek=[],this.Status=b.sD}ngOnInit(){}generateStaticWeek(){this.daysOfWeek=this.item.weekly_completions.map(([e,i])=>{const s=new Date(e);return{day:s.toLocaleDateString("en-US",{weekday:"short"}),date:s,completed:i}})}isSameDay(e,i){return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()}isToday(e){return this.isSameDay(e,new Date)}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-week-calendar"]],inputs:{item:"item"},standalone:!0,features:[t.UHJ],decls:3,vars:1,consts:[[1,"mb-4","w-80"],[1,"flex","justify-between","text-sm","text-gray-700","dark:text-gray-200"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[1,"block"],[1,"flex","mt-2","w-6","h-6","rounded-full","mx-auto","text-xs","font-semibold","relative","items-center","justify-center",3,"ngClass"],["class","absolute top-[-1px] right-[-1px] h-2 w-2 bg-green-500 rounded-full",4,"ngIf"],[1,"absolute","top-[-1px]","right-[-1px]","h-2","w-2","bg-green-500","rounded-full"]],template:function(i,s){1&i&&(t.I0R(0,"div",0)(1,"ul",1),t.yuY(2,T,6,7,"li",2),t.C$Y()()),2&i&&(t.yG2(2),t.E7m("ngForOf",s.daysOfWeek))},dependencies:[o.MD,o.QF,o.ay,o.u_]})}return a})();var g=n(9212),y=n(9144),w=n(1696),F=n(7256);let H=(()=>{class a{constructor(){this.onHabitDelete=new t._w7,this.loading=!1,this.Status=b.sD,this.apiService=(0,t.uUt)(l.H),this.notificationsService=(0,t.uUt)(S.E3)}onUpdateHabitStatus(e){const i={...this.item,status:e};this.onUpdateHabit(i)}onUpdateHabitTitle(e){const i={...this.item,title:e};this.onUpdateHabit(i)}onUpdateHabit(e){this.loading=!0,this.apiService.updateHabit(e.id,e).pipe((0,u.K)(),(0,g.y)(i=>{this.item=i,this.loading=!1,this.notificationsService.showNotification("Habit successfully updated","success")}),(0,y.a)(i=>(this.loading=!1,this.notificationsService.showNotification("Habit not updated. An error occurred","error"),i))).subscribe()}onDeleteHabit(e){confirm(`Are you sure you want to delete the Habit "${e.title}"?`)&&(this.loading=!0,this.apiService.deleteHabit(e.id).pipe((0,u.K)(),(0,g.y)(()=>{this.loading=!1,this.notificationsService.showNotification("Habit successfully deleted","success"),this.onHabitDelete.emit(this.item)}),(0,y.a)(i=>(this.loading=!1,this.notificationsService.showNotification("Habit not deleted. An error occurred","error"),i))).subscribe())}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-habit-tracker"]],inputs:{item:"item"},outputs:{onHabitDelete:"onHabitDelete"},standalone:!0,features:[t.UHJ],decls:11,vars:9,consts:[[3,"overlay","showLoader"],[1,"p-4","rounded-lg","shadow-md","dark:bg-gray-800","dark:text-white","bg-gray-100","text-black"],[1,"flex","justify-between","items-center","mb-4"],[3,"value","size","bold","onChange"],[1,"text-sm"],[1,"flex","gap-1"],[1,"w-20","text-center",3,"status","size","onSelect"],["appearance","flat","icon","tuiIconTrash","shape","rounded","size","s","title","Remove","tuiIconButton","","type","button",1,"remove",3,"click"],[3,"item"]],template:function(i,s){1&i&&(t.I0R(0,"tui-loader",0)(1,"div",1)(2,"div",2)(3,"div")(4,"xx-title-input",3),t.qCj("onChange",function(d){return s.onUpdateHabitTitle(d)}),t.C$Y(),t.I0R(5,"p",4),t.OEk(6),t.C$Y()(),t.I0R(7,"div",5)(8,"xx-status-select",6),t.qCj("onSelect",function(d){return s.onUpdateHabitStatus(d)}),t.C$Y(),t.I0R(9,"button",7),t.qCj("click",function(){return s.onDeleteHabit(s.item)}),t.C$Y()()(),t.wR5(10,"xx-week-calendar",8),t.C$Y()()),2&i&&(t.E7m("overlay",!0)("showLoader",s.loading),t.yG2(4),t.E7m("value",s.item.title)("size","lg")("bold",!0),t.yG2(2),t.cNF(s.item.description),t.yG2(2),t.E7m("status",s.item.status)("size","m"),t.yG2(2),t.E7m("item",s.item))},dependencies:[o.MD,x.e,F.M,I,h.CI,h.Kw,C.S,f.Sk,f.Cb,w.u]})}return a})();function G(a,r){if(1&a){const e=t.KQA();t.I0R(0,"xx-habit-tracker",2),t.qCj("onHabitDelete",function(s){t.usT(e);const c=t.GaO();return t.CGJ(c.onHabitDelete(s))}),t.C$Y()}2&a&&t.E7m("item",r.$implicit)}const Y=[{path:"",component:(()=>{class a{constructor(){this.habitList=[],this.apiService=(0,t.uUt)(l.H)}ngOnInit(){this.getHabits()}getHabits(){this.apiService.getHabits().pipe((0,u.K)(),(0,v.k)(e=>{this.habitList=e})).subscribe()}onHabitDelete(e){this.getHabits()}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-habits"]],decls:2,vars:1,consts:[[1,"flex","flex-col","gap-2"],[3,"item","onHabitDelete",4,"ngFor","ngForOf"],[3,"item","onHabitDelete"]],template:function(i,s){1&i&&(t.I0R(0,"div",0),t.yuY(1,G,1,1,"xx-habit-tracker",1),t.C$Y()),2&i&&(t.yG2(),t.E7m("ngForOf",s.habitList))},dependencies:[o.ay,H]})}return a})()}];let E=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.a4G({type:a});static#i=this.\u0275inj=t.s3X({imports:[p.qQ.forChild(Y),p.qQ]})}return a})(),O=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.a4G({type:a});static#i=this.\u0275inj=t.s3X({providers:[l.H],imports:[o.MD,E,H]})}return a})()}}]);