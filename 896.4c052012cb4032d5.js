"use strict";(self.webpackChunkplatform_frontend=self.webpackChunkplatform_frontend||[]).push([[896],{9896:(at,v,t)=>{t.r(v),t.d(v,{TasksModule:()=>it});var e=t(1368),m=t(6504),C=t(7048),x=t(2064),d=t(7692),g=t(1152),O=t(1512),f=t(8212),E=t(5488),I=t(296),A=t(3797),G=t(5188),D=t(968),R=t(6052),k=t(7544),N=t(7989),u=t(9104),Q=t(6732),U=t(5e3),F=t(4058),l=t(2531),p=t(5084),y=t(9212),L=t(9144),h=t(4940),c=t(6724),o=t(4496),S=t(7072),K=t(5980),P=t(9876),n=t(9080);function Y(i,et){1&i&&o.wR5(0,"xx-table")}const j=[{path:"",component:(()=>{class i{constructor(s,a,r){this.apiService=s,this.notificationsService=a,this.pageTitleService=r,this.taskList=[],this.todoList=[],this.archivedList=[],this.todoListSorted=[],this.archivedListSorted=[],this.viewMode="table",this.sortOrder="none",this.loading=!1,this.open=!0}ngOnInit(){this.pageTitleService.setPageTitle("tasks"),this.getTasks()}toggleSortByPriority(){let s;switch(this.sortOrder){case"none":s="asc";break;case"asc":s="desc";break;default:s="none"}this.sortOrder=s,this.todoListSorted=(0,c.ek)(this.todoList,s),this.archivedListSorted=(0,c.ek)(this.archivedList,s)}isTaskArchived(s){return[h.sD.Archived,h.sD.Completed,h.sD.Cancelled].includes(s.status)}setLists(s){this.todoList=[],this.archivedList=[],s.forEach(a=>{this.isTaskArchived(a)?this.archivedList.push(a):this.todoList.push(a)}),this.todoListSorted=(0,c.ek)(this.todoList,this.sortOrder),this.archivedListSorted=(0,c.ek)(this.archivedList,this.sortOrder)}getTasks(){this.loading=!0,this.apiService.getTasks({is_standalone:!0}).pipe((0,p.K)(),(0,y.y)(s=>{this.taskList=s,this.loading=!1,this.setLists(s)}),(0,L.a)(s=>(this.loading=!1,s))).subscribe()}createTask(s){this.apiService.createTask({title:s||"test task",is_standalone:!0}).pipe((0,p.K)(),(0,y.y)(()=>{this.getTasks(),this.notificationsService.showNotification("Task successfully created","success")}),(0,L.a)(r=>(this.notificationsService.showNotification("Task not created. An error occurred","error"),r))).subscribe()}static#t=this.\u0275fac=function(a){return new(a||i)(o.GI1(S.e),o.GI1(K.E),o.GI1(P.M))};static#s=this.\u0275cmp=o.In1({type:i,selectors:[["xx-tasks"]],decls:3,vars:2,consts:[[3,"showLoader"],[1,"w-full","text-gray-600","dark:text-gray-400","bg-white","dark:bg-gray-900","rounded-xl","p-4"],[4,"ngIf"]],template:function(a,r){1&a&&(o.I0R(0,"tui-loader",0)(1,"div",1),o.yuY(2,Y,1,0,"xx-table",2),o.C$Y()()),2&a&&(o.E7m("showLoader",r.loading),o.yG2(2),o.E7m("ngIf","table"===r.viewMode))},dependencies:[e.u_,d.Cb,n.oz]})}return i})()}];let z=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#s=this.\u0275mod=o.a4G({type:i});static#o=this.\u0275inj=o.s3X({imports:[l.qQ.forChild(j),l.qQ]})}return i})();var M=t(2604),B=t(5132),X=t(1696),Z=t(5152),$=t(5052),H=t(7256),J=t(7568),V=t(212),W=t(1704),b=t(7260),w=t(1988),q=t(2684),_=t(5216),tt=t(2852),st=t(5876);const ot=[d.Sk,g.M9,u.E,F.S,I.sd,O.w,f.CI,Q.kR,A.CQ,G.my,D.Y3,E.aS,U.m6,R.q8,k.iO,N.BZ,f.CI];let it=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#s=this.\u0275mod=o.a4G({type:i});static#o=this.\u0275inj=o.s3X({providers:[S.e,Z.o],imports:[C.SU,e.MD,z,M.e,B.k,X.u,x.O0,m.sl,ot,e.MD,m.sl,M.e]})}return i})();o.AnM(n.Et,[e.ay,e.u_,l.ER,$.e,H.M,J.U,V.O,W.C,b.m,w.K,q.y,_.m,tt.Q,st.u,d.Cb,g.o7,n.Se],[u.M]),o.AnM(n.yM,[e.ay,e.u_,n.Et],[])}}]);