"use strict";(self.webpackChunkplatform_frontend=self.webpackChunkplatform_frontend||[]).push([[308],{3688:(Y,h,s)=>{s.r(h),s.d(h,{RoutinesModule:()=>A});var c=s(1368),f=s(2531),t=s(4496),l=s(5084),p=s(9212),a=s(6716),C=s(7048);let d=(()=>{class n{constructor(e){this.http=e}getRoutines(){return this.http.get(`${a.O.apiUrl}/routines/`,{headers:{}})}getRoutine(e){return this.http.get(`${a.O.apiUrl}/routines/${e}/`,{headers:{}})}createRoutine(e){return this.http.post(`${a.O.apiUrl}/routines/`,e,{headers:{}})}deleteRoutine(e){return this.http.delete(`${a.O.apiUrl}/routines/${e}/`,{headers:{}})}updateRoutine(e,i){return this.http.put(`${a.O.apiUrl}/routines/${e}/`,i,{headers:{}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.CoB(C.KK))};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac})}return n})();var v=s(9876),R=s(9144),x=s(8960),y=s(5052),I=s(7256),g=s(5876);let _=(()=>{class n{constructor(){this.loading=!1,this.apiService=(0,t.uUt)(d)}onUpdateRoutineTitle(e){this.onUpdateRoutine({...this.item,title:e})}onUpdateRoutinePriority(e){this.onUpdateRoutine({...this.item,priority:e})}onUpdateRoutineStatus(e){this.onUpdateRoutine({...this.item,status:e})}onUpdateRoutine(e){this.loading=!0,this.apiService.updateRoutine(e.id,e).pipe((0,l.K)(),(0,p.y)(i=>{this.item=i,this.loading=!1}),(0,R.a)(i=>(this.loading=!1,x.k))).subscribe()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["xx-item"]],inputs:{item:"item"},decls:6,vars:5,consts:[[1,"flex","justify-between","items-center","px-4","py-2","bg-white","dark:bg-slate-900"],[3,"value","size","onChange"],[1,"flex","gap-2","items-center"],["size","md",1,"pr-2",3,"priority","onSelect"],[1,"w-20","text-center",3,"status","size","onSelect"]],template:function(i,o){1&i&&(t.I0R(0,"div",0)(1,"div")(2,"xx-title-input",1),t.qCj("onChange",function(r){return o.onUpdateRoutineTitle(r)}),t.C$Y()(),t.I0R(3,"div",2)(4,"xx-priority-select",3),t.qCj("onSelect",function(r){return o.onUpdateRoutinePriority(r)}),t.C$Y(),t.I0R(5,"xx-status-select",4),t.qCj("onSelect",function(r){return o.onUpdateRoutineStatus(r)}),t.C$Y()()()),2&i&&(t.yG2(2),t.E7m("value",o.item.title)("size","lg"),t.yG2(2),t.E7m("priority",o.item.priority),t.yG2(),t.E7m("status",o.item.status)("size","m"))},dependencies:[y.e,I.M,g.u]})}return n})();var T=s(396),E=s(2560);function G(n,m){if(1&n){const e=t.KQA();t.I0R(0,"div",3),t.qCj("click",function(o){t.usT(e);const u=t.GaO();return t.CGJ(u.toggleEditMode(o))}),t.OEk(1," Create Routine + "),t.C$Y()}}function U(n,m){if(1&n){const e=t.KQA();t.I0R(0,"div",4)(1,"xx-input",5),t.qCj("keyup.enter",function(o){t.usT(e);const u=t.GaO();return u.toggleEditMode(o),t.CGJ(u.confirmChanges(o))})("valueChange",function(o){t.usT(e);const u=t.GaO();return t.CGJ(u.onValueChange(o))}),t.C$Y(),t.I0R(2,"xx-button",6),t.qCj("click",function(o){t.usT(e);const u=t.GaO();return u.toggleEditMode(o),t.CGJ(u.confirmChanges(o))}),t.C$Y(),t.I0R(3,"xx-button",6),t.qCj("click",function(o){t.usT(e);const u=t.GaO();return t.CGJ(u.toggleEditMode(o))}),t.C$Y()()}2&n&&(t.yG2(),t.E7m("value","")("autofocus",!0)("placeholder","Title"),t.yG2(),t.E7m("icon","check")("size","sm"),t.yG2(),t.E7m("icon","cancel")("size","sm"))}let M=(()=>{class n{constructor(){this.onChange=new t._w7,this.isEditMode=!1}toggleEditMode(e){e.stopPropagation(),this.isEditMode=!this.isEditMode}onValueChange(e){this._title=e}confirmChanges(e){e.stopPropagation(),this.onChange.emit(this._title)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["xx-add-routine-button-input"]],outputs:{onChange:"onChange"},decls:3,vars:2,consts:[[1,"h-12","cursor-pointer","bg-slate-100","hover:bg-slate-50","dark:bg-gray-800","dark:hover:bg-gray-900","dark:active:bg-gray-800","dark:hover:text-gray-200"],["class","w-full h-full flex justify-center items-center",3,"click",4,"ngIf"],["class","w-full h-full flex justify-center items-center gap-2",4,"ngIf"],[1,"w-full","h-full","flex","justify-center","items-center",3,"click"],[1,"w-full","h-full","flex","justify-center","items-center","gap-2"],[3,"value","autofocus","placeholder","keyup.enter","valueChange"],[3,"icon","size","click"]],template:function(i,o){1&i&&(t.I0R(0,"div",0),t.yuY(1,G,2,0,"div",1)(2,U,4,7,"div",2),t.C$Y()),2&i&&(t.yG2(),t.E7m("ngIf",!o.isEditMode),t.yG2(),t.E7m("ngIf",o.isEditMode))},dependencies:[c.u_,T.k,E.g]})}return n})();function $(n,m){1&n&&t.wR5(0,"xx-item",2),2&n&&t.E7m("item",m.$implicit)}const j=[{path:"",component:(()=>{class n{constructor(){this.routines=[],this.apiService=(0,t.uUt)(d),this.pageTitleService=(0,t.uUt)(v.M)}ngOnInit(){this.pageTitleService.setPageTitle("Routines"),this.getRoutines()}getRoutines(){this.apiService.getRoutines().pipe((0,l.K)(),(0,p.y)(e=>{this.routines=e})).subscribe()}createRoutine(e){this.apiService.createRoutine({title:e}).pipe((0,l.K)(),(0,p.y)(i=>{this.routines.push(i)})).subscribe()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["xx-routines"]],decls:2,vars:1,consts:[[3,"item",4,"ngFor","ngForOf"],[3,"onChange"],[3,"item"]],template:function(i,o){1&i&&(t.yuY(0,$,1,1,"xx-item",0),t.I0R(1,"xx-add-routine-button-input",1),t.qCj("onChange",function(r){return o.createRoutine(r)}),t.C$Y()),2&i&&t.E7m("ngForOf",o.routines)},dependencies:[c.ay,_,M]})}return n})()}];let S=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.a4G({type:n});static#n=this.\u0275inj=t.s3X({imports:[f.qQ.forChild(j),f.qQ]})}return n})();var O=s(2604);let A=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.a4G({type:n});static#n=this.\u0275inj=t.s3X({providers:[d],imports:[c.MD,S,O.e,g.u]})}return n})()}}]);