"use strict";(self.webpackChunkplatform_frontend=self.webpackChunkplatform_frontend||[]).push([[32],{5032:(E,h,s)=>{s.r(h),s.d(h,{HabitsModule:()=>Y});var o=s(1368),f=s(2531),t=s(4496),d=s(1308),u=s(5084),H=s(4704),b=s(8212),g=s(7692),v=s(4058),x=s(2604),k=s(9768),C=s(4940);function D(a,l){1&a&&t.wR5(0,"span",7)}const S=(a,l)=>({"bg-blue-500 text-white hover:bg-blue-400 hover:dark:bg-blue-600":a,"bg-gray-300 dark:bg-gray-600 hover:bg-gray-200 hover:dark:bg-gray-700":l});function T(a,l){if(1&a){const e=t.KQA();t.I0R(0,"li",3)(1,"span",4),t.OEk(2),t.C$Y(),t.I0R(3,"span",5),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO();return t.CGJ(c.onDateClicked(r.date))}),t.OEk(4),t.yuY(5,D,1,0,"span",6),t.C$Y()()}if(2&a){const e=l.$implicit,i=t.GaO();t.yG2(2),t.cNF(e.day),t.yG2(),t.E7m("ngClass",t.IBC(4,S,e.completed,!e.completed)),t.yG2(),t.oRS(" ",e.date.getDate()," "),t.yG2(),t.E7m("ngIf",i.isToday(e.date))}}let w=(()=>{class a{set item(e){this._item=e,this.generateStaticWeek()}get item(){return this._item}constructor(){this.onDateClick=new t._w7,this.daysOfWeek=[],this.Status=C.sD}ngOnInit(){}generateStaticWeek(){this.daysOfWeek=this.item.weekly_completions.map(([e,i])=>{const n=new Date(e);return{day:n.toLocaleDateString("en-US",{weekday:"short"}),date:n,completed:i}})}isSameDay(e,i){return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()}isToday(e){return this.isSameDay(e,new Date)}onDateClicked(e){this.onDateClick.emit(e)}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-week-calendar"]],inputs:{item:"item"},outputs:{onDateClick:"onDateClick"},standalone:!0,features:[t.UHJ],decls:3,vars:1,consts:[[1,"mb-4","w-80"],[1,"flex","justify-between","text-sm","text-gray-700","dark:text-gray-200"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[1,"block"],[1,"flex","mt-2","w-6","h-6","rounded-full","mx-auto","text-xs","font-semibold","relative","items-center","justify-center","cursor-pointer",3,"ngClass","click"],["class","absolute top-[-1px] right-[-1px] h-2 w-2 bg-green-500 rounded-full",4,"ngIf"],[1,"absolute","top-[-1px]","right-[-1px]","h-2","w-2","bg-green-500","rounded-full"]],template:function(i,n){1&i&&(t.I0R(0,"div",0)(1,"ul",1),t.yuY(2,T,6,7,"li",2),t.C$Y()()),2&i&&(t.yG2(2),t.E7m("ngForOf",n.daysOfWeek))},dependencies:[o.MD,o.QF,o.ay,o.u_]})}return a})();var m=s(9212),p=s(9144),I=s(1696),G=s(7256);let y=(()=>{class a{constructor(){this.onHabitDelete=new t._w7,this.loading=!1,this.Status=C.sD,this.apiService=(0,t.uUt)(d.H),this.notificationsService=(0,t.uUt)(k.E3)}onUpdateHabitStatus(e){const i={...this.item,status:e};this.onUpdateHabit(i)}onUpdateHabitTitle(e){const i={...this.item,title:e};this.onUpdateHabit(i)}onUpdateHabit(e){this.loading=!0,this.apiService.updateHabit(e.id,e).pipe((0,u.K)(),(0,m.y)(i=>{this.item=i,this.loading=!1,this.notificationsService.showNotification("Habit successfully updated","success")}),(0,p.a)(i=>(this.loading=!1,this.notificationsService.showNotification("Habit not updated. An error occurred","error"),i))).subscribe()}onDeleteHabit(e){confirm(`Are you sure you want to delete the Habit "${e.title}"?`)&&(this.loading=!0,this.apiService.deleteHabit(e.id).pipe((0,u.K)(),(0,m.y)(()=>{this.loading=!1,this.notificationsService.showNotification("Habit successfully deleted","success"),this.onHabitDelete.emit(this.item)}),(0,p.a)(i=>(this.loading=!1,this.notificationsService.showNotification("Habit not deleted. An error occurred","error"),i))).subscribe())}toggleDateCompletion(e,i){this.apiService.toggleHabitCompletion(e,i).pipe((0,u.K)(),(0,m.y)(n=>{this.item=n,this.loading=!1,this.notificationsService.showNotification("Habit successfully updated","success")}),(0,p.a)(n=>(this.loading=!1,this.notificationsService.showNotification("Habit not updated. An error occurred","error"),n))).subscribe()}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-habit-tracker"]],inputs:{item:"item"},outputs:{onHabitDelete:"onHabitDelete"},standalone:!0,features:[t.UHJ],decls:11,vars:9,consts:[[3,"overlay","showLoader"],[1,"p-4","rounded-lg","shadow-md","dark:bg-gray-800","dark:text-white","bg-gray-100","text-black"],[1,"flex","justify-between","items-center","mb-4"],[3,"value","size","bold","onChange"],[1,"text-sm"],[1,"flex","gap-1"],[1,"w-20","text-center",3,"status","size","onSelect"],["appearance","flat","icon","tuiIconTrash","shape","rounded","size","s","title","Remove","tuiIconButton","","type","button",1,"remove",3,"click"],[3,"item","onDateClick"]],template:function(i,n){1&i&&(t.I0R(0,"tui-loader",0)(1,"div",1)(2,"div",2)(3,"div")(4,"xx-title-input",3),t.qCj("onChange",function(c){return n.onUpdateHabitTitle(c)}),t.C$Y(),t.I0R(5,"p",4),t.OEk(6),t.C$Y()(),t.I0R(7,"div",5)(8,"xx-status-select",6),t.qCj("onSelect",function(c){return n.onUpdateHabitStatus(c)}),t.C$Y(),t.I0R(9,"button",7),t.qCj("click",function(){return n.onDeleteHabit(n.item)}),t.C$Y()()(),t.I0R(10,"xx-week-calendar",8),t.qCj("onDateClick",function(c){return n.toggleDateCompletion(n.item.id,c)}),t.C$Y()()()),2&i&&(t.E7m("overlay",!0)("showLoader",n.loading),t.yG2(4),t.E7m("value",n.item.title)("size","lg")("bold",!0),t.yG2(2),t.cNF(n.item.description),t.yG2(2),t.E7m("status",n.item.status)("size","m"),t.yG2(2),t.E7m("item",n.item))},dependencies:[o.MD,x.e,G.M,w,b.CI,b.Kw,v.S,g.Sk,g.Cb,I.u]})}return a})();function F(a,l){if(1&a){const e=t.KQA();t.I0R(0,"xx-habit-tracker",2),t.qCj("onHabitDelete",function(n){t.usT(e);const r=t.GaO();return t.CGJ(r.onHabitDelete(n))}),t.C$Y()}2&a&&t.E7m("item",l.$implicit)}const _=[{path:"",component:(()=>{class a{constructor(){this.habitList=[],this.apiService=(0,t.uUt)(d.H)}ngOnInit(){this.getHabits()}getHabits(){this.apiService.getHabits().pipe((0,u.K)(),(0,H.k)(e=>{this.habitList=e})).subscribe()}onHabitDelete(e){this.getHabits()}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["xx-habits"]],decls:2,vars:1,consts:[[1,"flex","flex-col","gap-2"],[3,"item","onHabitDelete",4,"ngFor","ngForOf"],[3,"item","onHabitDelete"]],template:function(i,n){1&i&&(t.I0R(0,"div",0),t.yuY(1,F,1,1,"xx-habit-tracker",1),t.C$Y()),2&i&&(t.yG2(),t.E7m("ngForOf",n.habitList))},dependencies:[o.ay,y]})}return a})()}];let O=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.a4G({type:a});static#i=this.\u0275inj=t.s3X({imports:[f.qQ.forChild(_),f.qQ]})}return a})(),Y=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.a4G({type:a});static#i=this.\u0275inj=t.s3X({providers:[d.H],imports:[o.MD,O,y]})}return a})()}}]);